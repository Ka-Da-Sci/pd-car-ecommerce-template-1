<script>
    const cardsPerPage = 8; // Number of cards per page
    const maxVisiblePages = 5; // Maximum pagination buttons visible
    let currentPage = 1;

    const cardContainer = document.getElementById("card-container");
    const paginationContainer = document.getElementById("pagination");
    const resultsInfo = document.getElementById("results-info");
    const pageInfo = document.getElementById("page-info");
    const prevBtn = document.getElementById("prev-btn");
    const nextBtn = document.getElementById("next-btn");

    // Function to render cards
    const renderCards = () => {
      if (cardContainer) {
        cardContainer.innerHTML = "";
      }
      const start = (currentPage - 1) * cardsPerPage;
      const end = Math.min(start + cardsPerPage, inventoryData.length);

      for (let i = start; i < end; i++) {
        const car = inventoryData[i];
        const card = `
        <a href="./product-details.html" class="item-container items-center flex gap-2 flex-col border border-solid border-[#1E1E1E4D] hover:[box-shadow:0px_4px_30px_0px_#00000033] rounded-xl py-3 px-6">
          <div class="flex justify-center h-full w-full max-w-[259px] max-h-[193px] py-7 px-1 overflow-hidden">
            <img class="h-auto w-auto max-w-full max-h-full" src="${car.image}" alt="car">
          </div>
          <p class="item-name font-bold font-['poppins'] text-sm md:text-lg text-center sm:text-left capitalize text-[#767676]">
            ${car.name}
          </p>
          <div class="flex gap-2 items-center flex-col sm:flex-row">
            <div class="flex items-center justify-center">
              <img class="w-[12px] h-[12px]" src="./assets/images/colored-star.svg" alt="rating-star">
              <img class="w-[12px] h-[12px]" src="./assets/images/colored-star.svg" alt="rating-star">
              <img class="w-[12px] h-[12px]" src="./assets/images/colored-star.svg" alt="rating-star">
              <img class="w-[12px] h-[12px]" src="./assets/images/non-colored-star.svg" alt="rating-star">
              <img class="w-[12px] h-[12px]" src="./assets/images/non-colored-star.svg" alt="rating-star">
            </div>
            <p class="font-['poppins'] text-[#1E1E1E] text-center text-xs antialiased capitalize">
              <span>${car.rating}</span>
              <span>(${car.reviewsNum})</span>
            </p>
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 w-full place-content-between gap-1">
            <div class="bg-[#000000] rounded-md px-2 py-2 flex justify-center gap-1 items-center">
              <div class="flex justify-center w-full h-full max-w-4 max-h-4">
                <img class="w-auto h-auto max-w-full max-h-full" src="./assets/images/seat-icon.svg" alt="seat-icon">
              </div>
              <p class="text-[#FFFFFF] text-xs text-left font-normal font-['poppins'] capitalize whitespace-nowrap overflow-hidden">
                ${car.seatCount} Seats
              </p>
            </div>
            <div class="bg-[#000000] rounded-md px-2 py-2 flex justify-center gap-1 items-center">
              <div class="flex justify-center w-full h-full max-w-4 max-h-4">
                <img class="w-auto h-auto max-w-full max-h-full" src="./assets/images/auto-icon.svg" alt="seat-icon">
              </div>
              <p class="text-[#FFFFFF] text-xs text-left font-normal font-['poppins'] capitalize whitespace-nowrap overflow-hidden">
                ${car.transmissionType}
              </p>
            </div>
            <div class="bg-[#000000] rounded-md px-2 py-2 flex justify-center gap-1 items-center">
              <div class="flex justify-center w-full h-full max-w-4 max-h-4">
                <img class="w-auto h-auto max-w-full max-h-full" src="./assets/images/fuel-icon.svg" alt="fuel-icon">
              </div>
              <p class="text-[#FFFFFF] text-xs text-left font-normal font-['poppins'] capitalize whitespace-nowrap overflow-hidden">
                ${car.fuel}
              </p>
            </div>
          </div>
          <div class="flex justify-between items-center w-full gap-2">
            <p class="item-price font-bold font-['poppins'] text-left antialiased text-[#1E1E1E] text-sm sm:text-base md:text-lg lg:text-xl">
              <span>${car.currencySymb}</span><span>${car.price}</span>
            </p>
            <div class="flex justify-center items-center gap-2">
              <button class="flex justify-center w-full h-full max-w-6 max-h-6">
                <img src="./assets/images/like.svg" alt="wishlist-icon">
              </button>
              <button class="flex justify-center w-full h-full max-w-6 max-h-6">
                <img src="./assets/images/add-icon.svg" alt="add-icon">
              </button>
              <button class="flex justify-center w-full h-full max-w-6 max-h-6">
                <img src="./assets/images/preview-icon.svg" alt="preview-icon">
              </button>
            </div>
          </div>
          <div></div>
        </a>
      `;
        if (cardContainer) {
          cardContainer.innerHTML += card;
        }
      }

      if (resultsInfo) {
        resultsInfo.textContent = `Showing ${start + 1} - ${end} of ${
          inventoryData.length
        } results`;
      }
      if (pageInfo) {
        pageInfo.textContent = `Page ${currentPage} of ${Math.ceil(
          inventoryData.length / cardsPerPage
        )}`;
      }
    };

    // Function to scroll to the top of the container
    const scrollToTop = () => {
      const topElement = document.getElementById("card-container"); // Cards container
      topElement.classList.remove("grid");
      topElement.classList.add("hidden");
      // topElement.scrollIntoView({ behavior: "smooth", block: "start" });

      setTimeout(() => {
        window.scrollBy({
          top: -10000,
          behavior: "smooth",
        }),
          5;
      });
      setTimeout(() => {
        topElement.classList.remove("hidden");
        topElement.classList.add("grid");
      }, 100);
    };

    // Function to render pagination buttons
    const renderPagination = () => {
      if (paginationContainer) {
        paginationContainer.innerHTML = "";
      }
      const totalPages = Math.ceil(inventoryData.length / cardsPerPage);
      const half = Math.floor(maxVisiblePages / 2);

      let startPage = Math.max(currentPage - half, 1);
      let endPage = Math.min(startPage + maxVisiblePages - 1, totalPages);

      if (endPage - startPage + 1 < maxVisiblePages) {
        startPage = Math.max(endPage - maxVisiblePages + 1, 1);
      }

      // Previous Button
      prevBtn && (prevBtn.disabled = currentPage === 1);
      prevBtn &&
        (prevBtn.className = `px-3 py-2 rounded-md ${
          currentPage === 1
            ? "bg-gray-200 text-gray-400 cursor-not-allowed"
            : "bg-gray-300 text-gray-900 hover:bg-gray-300"
        }`);

      // Next Button
      nextBtn && (nextBtn.disabled = currentPage === totalPages);
      nextBtn &&
        (nextBtn.className = `px-3 py-2 rounded-md ${
          currentPage === totalPages
            ? "bg-gray-200 text-gray-400 cursor-not-allowed"
            : "bg-gray-300 text-gray-900 hover:bg-gray-300"
        }`);

      for (let i = startPage; i <= endPage; i++) {
        const button = document.createElement("button");
        button.textContent = i;
        button.className = `px-3 py-2 rounded-md ${
          i === currentPage
            ? "bg-orange-500 text-white"
            : "bg-gray-200 text-gray-700 hover:bg-gray-300"
        }`;

        button.addEventListener("click", () => {
          currentPage = i;
          renderCards();
          renderPagination();
          scrollToTop();
        });

        paginationContainer && paginationContainer.appendChild(button);
      }
    };

    // Navigation buttons
    prevBtn &&
      prevBtn.addEventListener("click", () => {
        if (currentPage > 1) {
          currentPage--;
          renderCards();
          renderPagination();
          scrollToTop();
        }
      });

    nextBtn &&
      nextBtn.addEventListener("click", () => {
        const totalPages = Math.ceil(inventoryData.length / cardsPerPage);
        if (currentPage < totalPages) {
          currentPage++;
          renderCards();
          renderPagination();
          scrollToTop();
        }
      });

    // Initial Render
    renderCards();
    renderPagination();
    window.addEventListener("resize", renderPagination);
  </script>