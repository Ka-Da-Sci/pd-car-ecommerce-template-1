export const defaultInventoryData = [
  {
    image: "./assets/images/veh0.png",
    name: "Audi AXXX8 2022",
    rating: 4.8,
    reviewsNum: "1,436",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "83,990",
    itemCategory: "sedans",
    listingDate: "2024-07-12T00:00:00.000Z",
    id: "e0cad9090fbfbdcea7034cda9e0dfd29",
  },
  {
    image: "./assets/images/veh1.png",
    name: "Ford XXXXV 2020",
    rating: 3.7,
    reviewsNum: "4,436",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "12,090",
    itemCategory: "suv & crossovers",
    listingDate: "2024-07-12T00:00:00.000Z",
    id: "a348506bba19dc224c2fd7932513a90f",
  },
  {
    image: "./assets/images/veh2.png",
    name: "Toyota Tacoma 2020",
    rating: 3.4,
    reviewsNum: "436",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "74,050",
    itemCategory: "trucks",
    listingDate: "2024-05-23T00:00:00.000Z",
    id: "4bf830d005120ceaefee984a5b4ab721",
  },
  {
    image: "./assets/images/veh3.png",
    name: "Mercedes Benz 2020",
    rating: 4.9,
    reviewsNum: "2,433",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "53,500",
    itemCategory: "luxury cars",
    listingDate: "2024-10-12T00:00:00.000Z",
    id: "c7409d9173c86645b1f10dfec9280b8a",
  },
  {
    image: "./assets/images/veh4.png",
    name: "Ferrari 2020",
    rating: 4.7,
    reviewsNum: "2,436",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "50,000",
    itemCategory: "electric & hybrid",
    listingDate: "2023-12-30T00:00:00.000Z",
    id: "f6401b4a73b97813ad2345264270c0bd",
  },
  {
    image: "./assets/images/veh5.png",
    name: "Tesla Truck",
    rating: 4.8,
    reviewsNum: "2,426",
    seatCount: "4",
    transmissionType: "manual",
    fuel: "electric",
    currencySymb: "$",
    price: "33,000",
    itemCategory: "classic & vintage",
    listingDate: "2024-12-25T00:00:00.000Z",
    id: "ff7205ad77c033d2c7fa30d9bad20429",
  },
  {
    image: "./assets/images/veh6.png",
    name: "Bugatti 2020",
    rating: 4.4,
    reviewsNum: "2,406",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "53,070",
    itemCategory: "sedans",
    listingDate: "2024-01-14T23:00:00.000Z",
    id: "cac76a19568e31a7415348c9a8180426",
  },
  {
    image: "./assets/images/veh7.png",
    name: "GMC 2020",
    rating: 4.5,
    reviewsNum: "2,486",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "63,000",
    itemCategory: "suv & crossovers",
    listingDate: "2023-03-23T00:00:00.000Z",
    id: "89ceb7f5dc5560a4195bbf89ea263dfb",
  },
  {
    image: "./assets/images/veh0.png",
    name: "Ford 2020",
    rating: 4.7,
    reviewsNum: "2,496",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "73,090",
    itemCategory: "trucks",
    listingDate: "2023-11-05T00:00:00.000Z",
    id: "de2a62182784784dfcefaaafe0939038",
  },
  {
    image: "./assets/images/veh1.png",
    name: "Toyota Tacoma 2020",
    rating: 4.2,
    reviewsNum: "5,436",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "52,090",
    itemCategory: "luxury cars",
    listingDate: "2024-09-08T23:00:00.000Z",
    id: "f3e53c75b1e5ac36f3d167de81a40063",
  },
  {
    image: "./assets/images/veh7.png",
    name: "Mercedes Benz 2020",
    rating: 4.5,
    reviewsNum: "1,456",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "94,750",
    itemCategory: "electric & hybrid",
    listingDate: "2024-05-14T23:00:00.000Z",
    id: "545df15e02d8f2b7122d3cc6072c195a",
  },
  {
    image: "./assets/images/veh6.png",
    name: "Ferrari 2020",
    rating: 4.6,
    reviewsNum: "3,136",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "53,500",
    itemCategory: "classic & vintage",
    listingDate: "2023-12-12T00:00:00.000Z",
    id: "d72c2bcdc65fdebcb80f9c97573532f7",
  },
  {
    image: "./assets/images/veh4.png",
    name: "Bugatti 2020",
    rating: 4.2,
    reviewsNum: "5,436",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "50,000",
    itemCategory: "sedans",
    listingDate: "2024-12-12T00:00:00.000Z",
    id: "6af9d71b959f474976dba362623e84e2",
  },
  {
    image: "./assets/images/veh2.png",
    name: "Tesla Truck",
    rating: 3.9,
    reviewsNum: "6,476",
    seatCount: "4",
    transmissionType: "manual",
    fuel: "electric",
    currencySymb: "$",
    price: "33,000",
    itemCategory: "suv & crossovers",
    listingDate: "2024-05-04T23:00:00.000Z",
    id: "01957279bc97b49677687b5e9ba7fb9f",
  },
  {
    image: "./assets/images/veh6.png",
    name: "Ford SUV 2020",
    rating: 4.4,
    reviewsNum: "3,436",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "53,070",
    itemCategory: "trucks",
    listingDate: "2024-06-22T23:00:00.000Z",
    id: "08c125817b53fbba344f6acc7fdf728d",
  },
  {
    image: "./assets/images/veh5.png",
    name: "Toyota Camry 2020",
    rating: 4.2,
    reviewsNum: "6,636",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "63,000",
    itemCategory: "luxury cars",
    listingDate: "2024-04-11T23:00:00.000Z",
    id: "3237e81d4907913180caecb15b8f072c",
  },
  {
    image: "./assets/images/veh4.png",
    name: "Mercedes Benz 2023",
    rating: 4.1,
    reviewsNum: "7,437",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "23,090",
    itemCategory: "electric & hybrid",
    listingDate: "2024-12-12T00:00:00.000Z",
    id: "c5594ab1c228241216e5d1ac6d74df27",
  },
  {
    image: "./assets/images/veh3.png",
    name: "Ferrari XXX 2010",
    rating: 4.3,
    reviewsNum: "2,237",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "62,090",
    itemCategory: "classic & vintage",
    listingDate: "2024-03-22T23:00:00.000Z",
    id: "c42d318288327397f4aa01194c63f78d",
  },
  {
    image: "./assets/images/veh2.png",
    name: "Silverado 2020",
    rating: 4.5,
    reviewsNum: "5,136",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "4,050",
    itemCategory: "sedans",
    listingDate: "2024-10-01T00:00:00.000Z",
    id: "24f6dccebc99b9e21136e72c0cb9afeb",
  },
  {
    image: "./assets/images/veh1.png",
    name: "Innoson Spree 2020",
    rating: 4.7,
    reviewsNum: "8,496",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "53,500",
    itemCategory: "suv & crossovers",
    listingDate: "2024-04-03T23:00:00.000Z",
    id: "de0a00d57db4d9fafc3504447bd3ec24",
  },
  {
    image: "./assets/images/veh0.png",
    name: "Toyota Sienna 2020",
    rating: 4.3,
    reviewsNum: "2,436",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "50,000",
    itemCategory: "trucks",
    listingDate: "2024-12-23T00:00:00.000Z",
    id: "2856f2718cbf69977d298af140df249c",
  },
  {
    image: "./assets/images/veh7.png",
    name: "Audi A10 2024",
    rating: 4.2,
    reviewsNum: "4,436",
    seatCount: "4",
    transmissionType: "manual",
    fuel: "electric",
    currencySymb: "$",
    price: "33,000",
    itemCategory: "luxury cars",
    listingDate: "2024-04-28T23:00:00.000Z",
    id: "e8b82b1e28a25db2f81064abeae0ba1a",
  },
  {
    image: "./assets/images/veh6.png",
    name: "Mercedes Benz 2020",
    rating: 4,
    reviewsNum: "6,436",
    seatCount: "4",
    transmissionType: "manual",
    fuel: "gas",
    currencySymb: "$",
    price: "43,070",
    itemCategory: "electric & hybrid",
    listingDate: "2024-03-03T23:00:00.000Z",
    id: "18abb95856ba2e8c0fdb31085ec6b85e",
  },
  {
    image: "./assets/images/veh5.png",
    name: "Ferrari DXXX 2018",
    rating: 4.3,
    reviewsNum: "2,466",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "manual",
    currencySymb: "$",
    price: "33,000",
    itemCategory: "classic & vintage",
    listingDate: "2024-05-06T23:00:00.000Z",
    id: "5eeed83eaa509a97caf12d37a0ad1290",
  },
  {
    image: "./assets/images/veh7.png",
    name: "Toyota Camry 2023",
    rating: 4,
    reviewsNum: "2,489",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "33,090",
    itemCategory: "sedans",
    listingDate: "2024-08-07T23:00:00.000Z",
    id: "8e97e135df3ac94e99c0a9c8897e37f4",
  },
  {
    image: "./assets/images/veh6.png",
    name: "Toyota Tacoma 2020",
    rating: 4.4,
    reviewsNum: "2,345",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "82,090",
    itemCategory: "suv & crossovers",
    listingDate: "2024-03-04T23:00:00.000Z",
    id: "8ab21c5cf32a85e3557e65735af8414b",
  },
  {
    image: "./assets/images/veh5.png",
    name: "Toyota Camry 2023",
    rating: 4.5,
    reviewsNum: "2,890",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "50,050",
    itemCategory: "trucks",
    listingDate: "2024-07-06T23:00:00.000Z",
    id: "f109765f7b4312f0ba6f6419bcc76d2b",
  },
  {
    image: "./assets/images/veh4.png",
    name: "Toyota Camry 2015",
    rating: 4.7,
    reviewsNum: "2,234",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "53,500",
    itemCategory: "luxury cars",
    listingDate: "2024-09-08T23:00:00.000Z",
    id: "d3841704d807acb6de6fa5ce6d21d18e",
  },
  {
    image: "./assets/images/veh3.png",
    name: "Toyota Camry 2023",
    rating: 4.3,
    reviewsNum: "2,123",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "50,000",
    itemCategory: "electric & hybrid",
    listingDate: "2024-04-03T23:00:00.000Z",
    id: "6aa554fa1a5eb66796b4793088885f77",
  },
  {
    image: "./assets/images/veh2.png",
    name: "Toyota Sienna 2021",
    rating: 4.1,
    reviewsNum: "2,685",
    seatCount: "4",
    transmissionType: "manual",
    fuel: "electric",
    currencySymb: "$",
    price: "33,000",
    itemCategory: "classic & vintage",
    listingDate: "2024-01-13T23:00:00.000Z",
    id: "eb13086302d1ed6b05749e04554cf450",
  },
  {
    image: "./assets/images/veh1.png",
    name: "Audi XXXXV 2018",
    rating: 4.6,
    reviewsNum: "2,789",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "53,070",
    itemCategory: "sedans",
    listingDate: "2024-01-22T23:00:00.000Z",
    id: "8c51fb207948afef6695aff8eb7674f9",
  },
  {
    image: "./assets/images/veh0.png",
    name: "Toyota Camry 2023",
    rating: 4.8,
    reviewsNum: "5,789",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "63,000",
    itemCategory: "suv & crossovers",
    listingDate: "2024-03-15T23:00:00.000Z",
    id: "a8341a1399bb1c295273fa5984a44955",
  },
  {
    image: "./assets/images/veh0.png",
    name: "Porsche Cayenne 2020",
    rating: 4.5,
    reviewsNum: "2,321",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "73,990",
    itemCategory: "trucks",
    listingDate: "2024-04-04T23:00:00.000Z",
    id: "c74b7ded08229cf43f779cca257fb947",
  },
  {
    image: "./assets/images/veh1.png",
    name: "Toyota Camry 2023",
    rating: 4.4,
    reviewsNum: "2,456",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "92,090",
    itemCategory: "luxury cars",
    listingDate: "2024-08-07T23:00:00.000Z",
    id: "34166d2b393c3eee54f3e1e710a68f9e",
  },
  {
    image: "./assets/images/veh2.png",
    name: "Porsche Cayenne 2020",
    rating: 4.6,
    reviewsNum: "2,111",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "51,050",
    itemCategory: "electric & hybrid",
    listingDate: "2024-06-05T23:00:00.000Z",
    id: "4b331f962ce69ac4ede189ecc5d8876d",
  },
  {
    image: "./assets/images/veh7.png",
    name: "Toyota Camry 2023",
    rating: 4.5,
    reviewsNum: "2,121",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "53,500",
    itemCategory: "classic & vintage",
    listingDate: "2024-05-04T23:00:00.000Z",
    id: "1018323f90de2f648c13696f417452e0",
  },
  {
    image: "./assets/images/veh6.png",
    name: "Porsche Cayenne 2020",
    rating: 4.1,
    reviewsNum: "2,456",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "50,000",
    itemCategory: "sedans",
    listingDate: "2023-12-31T23:00:00.000Z",
    id: "d8edd3ca2b1b89ca85bdda9cbe1458a4",
  },
  {
    image: "./assets/images/veh5.png",
    name: "Toyota Camry 2023",
    rating: 4.5,
    reviewsNum: "2,678",
    seatCount: "4",
    transmissionType: "manual",
    fuel: "electric",
    currencySymb: "$",
    price: "33,000",
    itemCategory: "suv & crossovers",
    listingDate: "2024-04-04T23:00:00.000Z",
    id: "703a711cd494e11c65595224dcea5901",
  },
  {
    image: "./assets/images/veh4.png",
    name: "Porsche Cayenne 2020",
    rating: 4.5,
    reviewsNum: "2,890",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "53,070",
    itemCategory: "trucks",
    listingDate: "2024-06-06T23:00:00.000Z",
    id: "b887fc9afef813f38dccbdd5e41fba1a",
  },
  {
    image: "./assets/images/veh3.png",
    name: "Toyota Camry 2023",
    rating: 4.4,
    reviewsNum: "2,432",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "63,000",
    itemCategory: "luxury cars",
    listingDate: "2024-04-03T23:00:00.000Z",
    id: "1590d179080a4636a14a692be3f1d588",
  },
  {
    image: "./assets/images/veh7.png",
    name: "Toyota Camry 2023",
    rating: 4.2,
    reviewsNum: "2,675",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "53,090",
    itemCategory: "electric & hybrid",
    listingDate: "2024-02-01T23:00:00.000Z",
    id: "89ad49620bff8cf3041e2aa7bf57ffad",
  },
  {
    image: "./assets/images/veh6.png",
    name: "Porsche Cayenne 2020",
    rating: 4.3,
    reviewsNum: "1,436",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "22,090",
    itemCategory: "classic & vintage",
    listingDate: "2024-05-05T23:00:00.000Z",
    id: "cd31b88eda7b38d5b619054cbdf422a2",
  },
  {
    image: "./assets/images/veh5.png",
    name: "Toyota Camry 2023",
    rating: 4.2,
    reviewsNum: "99",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "84,050",
    itemCategory: "sedans",
    listingDate: "2024-08-07T23:00:00.000Z",
    id: "dde098a02c8668246cd025a7b3b41b95",
  },
  {
    image: "./assets/images/veh4.png",
    name: "Toyota Camry 2023",
    rating: 3,
    reviewsNum: "29",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "53,500",
    itemCategory: "suv & crossovers",
    listingDate: "2024-05-04T23:00:00.000Z",
    id: "ee69047f5d7bd3b3173e6d9ffd87e8be",
  },
  {
    image: "./assets/images/veh3.png",
    name: "Porsche Cayenne 2020",
    rating: 4.5,
    reviewsNum: "9,098",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "50,000",
    itemCategory: "trucks",
    listingDate: "2024-05-04T23:00:00.000Z",
    id: "9b8cf965ef41f64187d6cf4e76a65cfb",
  },
  {
    image: "./assets/images/veh2.png",
    name: "Toyota Camry 2023",
    rating: 4.4,
    reviewsNum: "777",
    seatCount: "4",
    transmissionType: "manual",
    fuel: "electric",
    currencySymb: "$",
    price: "33,000",
    itemCategory: "luxury cars",
    listingDate: "2024-07-06T23:00:00.000Z",
    id: "0ead5cf80ce6afa6e9ad36baaeb279d4",
  },
  {
    image: "./assets/images/veh1.png",
    name: "Tesla Truck XSVV 2024",
    rating: 4.3,
    reviewsNum: "123",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "53,070",
    itemCategory: "electric & hybrid",
    listingDate: "2024-06-06T23:00:00.000Z",
    id: "735375f92b5b81259063e77da648a4de",
  },
  {
    image: "./assets/images/veh0.png",
    name: "Toyota Camry 2023",
    rating: 4.7,
    reviewsNum: "686",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "13,000",
    itemCategory: "classic & vintage",
    listingDate: "2024-04-03T23:00:00.000Z",
    id: "ff02e01b5765a094009f8205ba1aefbe",
  },
  {
    image: "./assets/images/veh1.png",
    name: "Tesla Truck XSVV 2024",
    rating: 4.7,
    reviewsNum: "1,098",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "43,000",
    itemCategory: "sedans",
    listingDate: "2024-07-06T23:00:00.000Z",
    id: "b50a076bc9f0d49c4c67fc3abe1c50c7",
  },
  {
    image: "./assets/images/veh5.png",
    name: "Toyota Camry 2023",
    rating: 4.2,
    reviewsNum: "2,436",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "52,490",
    itemCategory: "suv & crossovers",
    listingDate: "2024-05-05T23:00:00.000Z",
    id: "f77acfa3550ae4e2daa04cb505860107",
  },
  {
    image: "./assets/images/veh0.png",
    name: "Tesla Truck XSVV 2024",
    rating: 4.3,
    reviewsNum: "2,236",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "54,050",
    itemCategory: "trucks",
    listingDate: "2024-12-12T00:00:00.000Z",
    id: "3754036d083ef905fad8275d20ddda17",
  },
  {
    image: "./assets/images/veh5.png",
    name: "Toyota Camry 2023",
    rating: 4.5,
    reviewsNum: "1,436",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "53,500",
    itemCategory: "luxury cars",
    listingDate: "2024-12-23T00:00:00.000Z",
    id: "32814cb1285b2766068a486d25df10be",
  },
  {
    image: "./assets/images/veh6.png",
    name: "Tesla Truck XSVV 2024",
    rating: 2.4,
    reviewsNum: "2,422",
    seatCount: "4",
    transmissionType: "auto",
    fuel: "gas",
    currencySymb: "$",
    price: "50,000",
    itemCategory: "electric & hybrid",
    listingDate: "2024-04-04T23:00:00.000Z",
    id: "8982ee3ec1d79c65832d1d87442afd9d",
  },
  {
    image: "./assets/images/veh1.png",
    name: "Toyota Camry 2023",
    rating: 4,
    reviewsNum: "3,006",
    seatCount: "4",
    transmissionType: "manual",
    fuel: "electric",
    currencySymb: "$",
    price: "33,000",
    itemCategory: "classic & vintage",
    listingDate: "2024-05-05T23:00:00.000Z",
    id: "98fc7f497cdc79c1c678a136a5984543",
  },
];

// let itemNum = 0;
// defaultInventoryData.forEach((item) => {
//   itemNum++;
//   const uniqueString = `${item.name}-${itemNum}`;
//   item["id"] = CryptoJS.MD5(uniqueString).toString();
// });

const openCartBtn = document.getElementById("cart-trolley");
const lagoonProtocol = () => {
  const countrySelect = document.getElementById("country");
  const regionSelect = document.getElementById("region");
  const citySelect = document.getElementById("city");
  //   const checkoutModal = document.getElementById("checkout-modal");
  const checkoutForm = document.querySelector(".modal-content");
  const orderPlacedModal = document.getElementById("orderPlacedModal");
  const viewReceiptModal = document.getElementById("viewReceiptModal");
  const contactVendorModal = document.getElementById("contactVendorModal");
  const closeOrderPlaced = document.getElementById("closeOrderPlaced");
  const closeViewReceipt = document.getElementById("closeViewReceipt");
  const closeContactVendor = document.getElementById("closeContactVendor");
  const contactVendorBtn = document.getElementById("contactVendorBtn");
  const viewReceiptBtn = document.getElementById("viewReceiptBtn");
  const totalAmount = document.getElementById("total-price").textContent;
  const receiptAmount = document.getElementById("receiptTotalPrice");
  const cartCheckOutModal = document.getElementById("checkout-modal");
  const closeModalBtn = document.getElementById("close-modal");
  const continueShoppingBtn = document.getElementById("back");
  const apiKey = "b1hsd211cnlZek1YZ1piNlBVa3VWM001R2p1WWpEWkd2bnRueWkxTQ==";
  const headers = {
    "X-CSCAPI-KEY": apiKey,
  };
  let auxParam = {};
  let countries = {};

  const createRequest = async (url, headersParam, searchEntity) => {
    try {
      const response = await fetch(url, { headers: { ...headersParam } });
      if (!response.ok) {
        throw new Error(response.status);
      }

      const data = await response.json();

      switch (searchEntity) {
        case "countries":
          data.forEach((entity) => {
            countries[entity.name] = {
              name: entity.name,
              abbr: (entity.iso2 && entity.iso2) || null,
            };
          });
          break;
        case "states":
          countries[auxParam.country]["states"] = {};
          data.forEach((entity) => {
            countries[auxParam.country]["states"][entity.name] = {
              name: entity.name,
              abbr: (entity.iso2 && entity.iso2) || null,
            };
          });
          break;
        case "cities":
          countries[auxParam.country]["states"][auxParam.state]["cities"] = [];
          data.forEach((entity) => {
            countries[auxParam.country]["states"][auxParam.state]["cities"][
              entity.name
            ] = entity;
          });
          break;
        default:
          console.log("May Day! May Day! Anormally Detected!");
      }
      return countries;
    } catch (error) {
      console.log(error);
      return null;
    }
  };

  const abortFunc = () => {
    countrySelect.innerHTML =
      '<option value="" selected disabled>Country</option>';
    regionSelect.innerHTML =
      '<option value="" selected disabled>Region/State</option>';
    citySelect.innerHTML = '<option value="" selected disabled>City</option>';
  };

  const populateSelect = (selectElement, options) => {
    selectElement.innerHTML =
      '<option value="" selected disabled>Select</option>';
    options.length !== 0 &&
      options.sort().forEach((option) => {
        const opt = document.createElement("option");
        opt.value = option;
        opt.textContent = option;
        selectElement.appendChild(opt);
      });

    const zeroData = () => {
      selectElement.innerHTML =
        '<option value="No State" selected disabled>No State</option>';
      citySelect.innerHTML =
        '<option value="No City" selected disabled>No City</option>';
    };
    options.length === 0 && zeroData();
  };

  const allCountriesUrl = "https://api.countrystatecity.in/v1/countries";
  createRequest(allCountriesUrl, headers, "countries").then((geoData) => {
    if (geoData) {
      // Populate countries
      populateSelect(countrySelect, Object.keys(geoData));
    } else {
      console.log("Failed To Fetch Data!");
    }
  });

  countrySelect.addEventListener("change", () => {
    const selectedCountry = countrySelect.value;

    auxParam.country = selectedCountry;
    const targetCountryCode = countries[selectedCountry]["abbr"];
    let countriesStatesUrl = `https://api.countrystatecity.in/v1/countries/${targetCountryCode}/states`;
    createRequest(countriesStatesUrl, headers, "states").then((geoData) => {
      if (geoData) {
        citySelect.innerHTML =
          '<option value="" selected disabled>City</option>'; // Reset cities
        // Populate States/Regions
        populateSelect(
          regionSelect,
          Object.keys(geoData[auxParam.country]["states"])
        );
      } else {
        console.log("Failed To Fetch Data!");
        abortFunc();
      }
    });
  });

  regionSelect.addEventListener("change", () => {
    const selectedState = regionSelect.value;
    auxParam.state = selectedState;
    const bulkFunc = () => {
      const targetStateCode =
        countries[auxParam.country]["states"][auxParam.state]["abbr"];
      const targetCountryCode = countries[auxParam.country]["abbr"];
      let countriesStatesCitiesUrl = `https://api.countrystatecity.in/v1/countries/${targetCountryCode}/states/${targetStateCode}/cities`;
      createRequest(countriesStatesCitiesUrl, headers, "cities").then(
        (geoData) => {
          if (geoData) {
            // Populate Cities
            populateSelect(
              citySelect,
              Object.keys(
                geoData[auxParam.country]["states"][auxParam.state]["cities"]
              )
            );
          } else {
            console.log("Failed To Fetch Data!");
            abortFunc();
          }
        }
      );
    };
    countries[auxParam.country]["states"][auxParam.state] && bulkFunc();
  });

  document.querySelectorAll(".select img").forEach((img) => {
    img.addEventListener("click", () => {
      const radio = img.previousElementSibling;
      if (radio) {
        radio.checked = true;
      }
    });
  });

  openCartBtn &&
    openCartBtn.addEventListener("click", () => {
      cartCheckOutModal.classList.add("flex");
      cartCheckOutModal.classList.remove("hidden");
      document.body.style.overflow = "hidden";
    });

  // Close the cart modal when the close button is clicked
  closeModalBtn.addEventListener("click", () => {
    cartCheckOutModal.classList.remove("flex");
    cartCheckOutModal.classList.add("hidden");
    document.body.style.overflow = "auto";
  });
  continueShoppingBtn.addEventListener("click", () => {
    cartCheckOutModal.classList.remove("flex");
    cartCheckOutModal.classList.add("hidden");
    document.body.style.overflow = "auto";
  });

  checkoutForm.addEventListener("submit", (event) => {
    // Prevent default form submission
    event.preventDefault();

    // Show the order placed modal
    orderPlacedModal.style.display = "flex"; // Assuming modal is initially hidden via CSS
    cartCheckOutModal.style.display = "none";
    receiptAmount.textContent = totalAmount;
    document.body.style.overflow = "auto";
  });
  closeOrderPlaced.addEventListener("click", () => {
    orderPlacedModal.style.display = "none";
  });

  viewReceiptBtn.addEventListener("click", (event) => {
    event.preventDefault();
    viewReceiptModal.style.display = "flex";
    orderPlacedModal.style.display = "none";
  });

  closeViewReceipt.addEventListener("click", () => {
    viewReceiptModal.style.display = "none";
    orderPlacedModal.style.display = "flex";
  });

  contactVendorBtn.addEventListener("click", (event) => {
    event.preventDefault();
    contactVendorModal.style.display = "flex";
    orderPlacedModal.style.display = "none";
  });
  closeContactVendor &&
    closeContactVendor.addEventListener("click", () => {
      contactVendorModal.style.display = "none";
      orderPlacedModal.style.display = "flex";
    });
};

export const cartModalProtocol = () => {
  // Get references to key elements
  // const openCartBtn = document.getElementById("cart-trolley");
  const cartCheckOutModal = document.getElementById("checkout-modal");
  const closeModalBtn = document.getElementById("close-modal");
  const continueShoppingBtn = document.querySelector(".cart-empty-state a");
  const addToCartBtn = document.querySelectorAll(".add-to-cart");
  const cartItemsCounter = document.getElementById("num-of-items");
  const cartItemsContainer = document.getElementById("cart-items");
  const clearCartBtn = document.getElementById("empty-cart");
  const subtotalPriceElem = document.getElementById("subtotal-price");
  const deliveryFeeElem = document.getElementById("delivery-fee");
  const totalPriceElem = document.getElementById("total-price");
  const continueToCheckout = document.querySelector(".go-to-cart");
  const applyDiscountBtn = document.getElementById("apply-discount");
  const deliveryFee = parseFloat(deliveryFeeElem.textContent.replace("$", ""));
  let cartItems = JSON.parse(localStorage.getItem("cartItems")) || {};
  // let cartItems =  {rtfj6kk: 'Lovrerttt',
  //   ujjkofjr5: 'ogkllfmfjjjg'
  // };
  let shopItemQty = document.querySelector("#quantity");

  lagoonProtocol();

  // Open the cart modal when the cart button is clicked
  openCartBtn &&
    openCartBtn.addEventListener("click", () => {
      console.log("Cart Ought To Open Now!");
      loadCartState();
      cartCheckOutModal.classList.add("flex");
    });

  continueToCheckout &&
    continueToCheckout.addEventListener("click", (event) => {
      event.preventDefault();
      loadCartState();
      cartCheckOutModal.classList.add("flex");
      cartCheckOutModal.classList.remove("hidden");
    });

  // Close the cart modal when the close button is clicked
  closeModalBtn.addEventListener("click", () => {
    cartCheckOutModal.classList.remove("flex");
    cartCheckOutModal.classList.add("hidden");
  });

  continueShoppingBtn.addEventListener("click", () => {
    cartCheckOutModal.classList.remove("flex");
    cartCheckOutModal.classList.add("hidden");
    location.reload();
  });

  // Add event listeners to all "Add to Cart" buttons
  if (addToCartBtn.length > 0) {
    addToCartBtn.forEach((btn) =>
      btn.addEventListener("click", (event) => {
        // event.preventDefault();
        console.log(shopItemQty.value);

        // const currentCartItemsIds =
        //   JSON.parse(localStorage.getItem("cartItemsIds")) || [];
        // const targetLinkId = event.target.closest("a").id;
        const newCartItem = event.target.closest("a")
          ? targetItem(event.target.closest("a").id)
          : targetItem(null);
        console.log(newCartItem);

        // Prevent default link behavior
        event.preventDefault();
        // event.stopPropagation();

        // Get the product details from the clicked item
        // const name = newCartItem.name;
        const collectionType = newCartItem.collectionType;
        // const price = parseFloat(newCartItem.price);
        // const imageSrc = newCartItem.image;

        console.log(Object.keys(cartItems));

        if (Object.keys(cartItems).includes(newCartItem.id)) {
          alert(
            "Item already in cart!\nNeed to modify your order?\nGo to cart!"
          );
          return;
        }

        // Create a new list item for the cart
        const li = document.createElement("li");
        li.classList.add(
          "item",
          "w-full",
          "flex",
          "items-center",
          "md:justify-normal",
          "justify-between",
          "gap-4",
          "pb-1",
          "transition-all",
          "duration-300",
          "ease-in-out"
        );
        // li.classList.add("item", "w-full", "flex", "items-center", "md:justify-normal", "justify-between", "gap-8", "pb-1", "border-b", "border-solid", "border-[#3333333b]", "transition-all", "duration-300", "ease-in-out", "hover:[box-shadow:0px_2px_6px_4px_#00000018]");
        li.setAttribute("id", newCartItem.id);
        // li.style.overflow = "auto";
        console.log(newCartItem.price);
        console.log(shopItemQty.value);
        const cartHtml = cartItemContainer(
          newCartItem,
          shopItemQty.value,
          collectionType
        );

        // Set the inner HTML of the new list item
        li.innerHTML = cartHtml;

        cartItems[newCartItem.id] = shopItemQty.value;
        // currentCartItemsIds.push(newCartItem.productId);
        localStorage.setItem("cartItems", JSON.stringify(cartItems));
        // localStorage.setItem("cartItemsIds", JSON.stringify(currentCartItemsIds));

        // Append the new list item to the cart
        cartItemsContainer.appendChild(li);

        // Get references to the increment and decrement buttons in the cart item and the actual item
        const incrementCart = li.querySelector(".increment");
        const decrementCart = li.querySelector(".decrement");
        const quantityCart = li.querySelector("#quantity");
        const quantityItem = document.getElementById("quantity");
        const incrementItem = document.querySelector("#minus");
        const decrementItem = document.querySelector("#plus");
        const itemTotalPriceElem = li.querySelector(".item-total-price");
        console.log(event.target.closest('a'));
        const parentLink = event.target.closest('a');
        quantityCart.value = parentLink ? document.querySelector(`#${CSS.escape(parentLink.id)} #quantity`).value : shopItemQty.value;

        // Function to synchronize quantity between item and cart
        const syncQuantity = () => {
          quantityCart.value = quantityItem.textContent;
          updateItemTotalPrice();
          updateCartPrices();
          saveCartState();
        };

        // Function to update item total price based on quantity
        const updateItemTotalPrice = () => {
          const quantity = parseInt(quantityCart.value);
          const newTotalPrice = quantity * newCartItem.price;
          console.log(newTotalPrice);
          itemTotalPriceElem.textContent = newTotalPrice.toFixed(2);
          updateCartPrices(); // Update cart subtotal and total prices after changing item price
        };

        // Add event listeners for increment and decrement buttons in the cart item
        incrementCart.addEventListener("click", (event) => {
          event.preventDefault();
          quantityCart.value = parseInt(quantityCart.value) + 1;
          syncQuantity();
          saveCartState();
        });

        decrementCart.addEventListener("click", (event) => {
          event.preventDefault();
          if (parseInt(quantityCart.value) > 1) {
            quantityCart.value = parseInt(quantityCart.value) - 1;
            syncQuantity();
            saveCartState();
          }
        });

        incrementItem.addEventListener("click", (event) => {
          event.preventDefault();
          quantityCart.value = parseInt(quantityCart.value) + 1;
          syncQuantity();
          saveCartState();
        });

        decrementItem.addEventListener("click", (event) => {
          event.preventDefault();
          if (parseInt(quantityCart.value) > 1) {
            quantityCart.value = parseInt(quantityCart.value) - 1;
            syncQuantity();
            saveCartState();
          }
        });

        // Synchronize quantity when changed in the original item
        quantityItem.addEventListener("input", () => {
          quantityCart.value = quantityItem.value;
          syncQuantity();
        });

        // Add event listener for the remove button in the cart item
        li.querySelector(".remove").addEventListener("click", () => {
          li.remove();
          // let cartItemsIds = JSON.parse(localStorage.getItem(''));
          updateCartCounter();
          updateCartPrices();
          displayEmptyState();
          saveCartState();
          addToCartBtn.style.display = "block";
          quantityItem.value = 1; // Reset the quantity in the original item
        });

        // Update cart counter and show/hide appropriate elements
        updateCartCounter();
        updateCartPrices();
        displayEmptyState();
        saveCartState();
        //   addToCartBtn.style.display = "none";
      })
    );
  }

  clearCartBtn.addEventListener("click", () => {
    localStorage.clear();
    emptyCart();
    addToCartBtn.style.display = "block";
  });

  // Function to empty cart
  const emptyCart = () => {
    // Remove all items from the cart container
    while (cartItemsContainer.firstChild) {
      cartItemsContainer.removeChild(cartItemsContainer.firstChild);
    }

    // Update cart counter, prices, and empty state
    updateCartCounter();
    updateCartPrices();
    displayEmptyState();
    saveCartState();

    // Show "Add to Cart" buttons and hide item incrementors outside the cart container
    if (addToCartBtn) {
      addToCartBtn.style.display = "block";
    }
  };

  //save cart state
  const saveCartState = () => {
    // let updatedCartItemsIds = [];
    // const cartItemsQty = {};
    cartItems = {};
    cartItemsContainer.querySelectorAll(".item").forEach((item) => {
      // const prodImg = `./assets${
      //   item.querySelector(".item-image img").src.split("assets")[1]
      // }`.toString();

      // cartItems.push({
      //   image: prodImg,
      //   name: item.querySelector(".product-name .name").textContent,
      //   id: item.id,
      //   collectionType: item.querySelector(".product-name .vendor") ? item.querySelector(".product-name .vendor").textContent : '',
      //   price: +`${item
      //     .querySelector(".unit-price")
      //     .textContent.replace("$", "")}`,
      // });

      cartItems[item.id] = item.querySelector("#quantity").value;
      // updatedCartItemsIds.push(item.id);
      // cartItemsQty[item.id] = item.querySelector("#quantity").value;
    });

    localStorage.setItem("cartItems", JSON.stringify(cartItems));
    // localStorage.setItem("cartItemsIds", JSON.stringify(updatedCartItemsIds));
    // localStorage.setItem("cartItemsQty", JSON.stringify(cartItemsQty));
  };

  //function to load cart
  const loadCartState = () => {
    // Retrieve cartItems and cartItemsQty from localStorage
    const storedCartItems = JSON.parse(localStorage.getItem("cartItems")) || {};
    // const cartItemsQty = JSON.parse(localStorage.getItem("cartItemsQty"));

    // Check if there are any stored items
    if (Object.keys(storedCartItems).length > 0) {
      const cartItems = { ...storedCartItems };

      // Clear current cart items from the UI
      cartItemsContainer.innerHTML = "";

      // Rebuild the cart UI based on stored data
      Object.keys(cartItems).forEach((key) => {
        let cartItem = targetItem(key);
        const li = document.createElement("li");
        const collectionType = cartItem.collectionType;
        li.classList.add(
          "item",
          "w-full",
          "flex",
          "items-center",
          "md:justify-normal",
          "justify-between",
          "gap-4",
          "pb-1",
          "transition-all",
          "duration-300",
          "ease-in-out"
        );
        // li.classList.add("item", "w-full", "flex", "items-center", "md:justify-normal", "justify-between", "gap-8", "pb-1", "border-b", "border-solid", "border-[#3333333b]", "transition-all", "duration-300", "ease-in-out", "hover:[box-shadow:0px_2px_6px_4px_#00000018]");
        li.setAttribute("id", key);
        const cartHtml = cartItemContainer(
          cartItem,
          cartItems[key],
          collectionType
        );

        // Construct the HTML for each cart item
        li.innerHTML = cartHtml;

        // Append the new list item to the cart
        cartItemsContainer.appendChild(li);

        // Get references to the increment and decrement buttons in the cart item and the actual item
        const incrementCart = li.querySelector(".increment");
        const decrementCart = li.querySelector(".decrement");
        const quantityCart = li.querySelector("#quantity");
        const itemTotalPriceElem = li.querySelector(".item-total-price");
        // Function to update item total price based on quantity
        const updateItemTotalPrice = () => {
          const quantity = parseInt(quantityCart.value);
          const newTotalPrice = quantity * parseFloat(cartItem.price);
          itemTotalPriceElem.textContent = newTotalPrice.toFixed(2);
          saveCartState();
          updateCartPrices(); // Update cart subtotal and total prices after changing item price
        };

        // Add event listeners for increment and decrement buttons in the cart item
        incrementCart.addEventListener("click", (event) => {
          event.preventDefault();
          quantityCart.value = parseInt(quantityCart.value) + 1;
          updateItemTotalPrice();
        });

        // Add event listeners for input elements in the cart item
        quantityCart.addEventListener("change", (event) => {
          event.preventDefault();
          updateItemTotalPrice();
        });

        decrementCart.addEventListener("click", (event) => {
          event.preventDefault();
          if (parseInt(quantityCart.value) > 1) {
            quantityCart.value = parseInt(quantityCart.value) - 1;
            updateItemTotalPrice();
          }
        });

        // Ensure initial item total price is calculated correctly on page load
        updateItemTotalPrice();

        // Add event listener for the remove button in the cart item
        li.querySelector(".remove").addEventListener("click", () => {
          li.remove();
          updateCartCounter();
          updateCartPrices();
          displayEmptyState();
          saveCartState();
        });
      });

      // Ensure the cart counters and prices are updated after loading
      updateCartCounter();
      updateCartPrices();
      saveCartState();
    }
  };
  // Function to update the cart items counter
  const updateCartCounter = () => {
    const numberOfItems = cartItemsContainer.children.length;
    cartItemsCounter.textContent = numberOfItems;
  };

  // Function to update cart prices
  const updateCartPrices = () => {
    let subtotal = 0;
    const cartItems = cartItemsContainer.querySelectorAll(".item");
    cartItems.forEach((item) => {
      const itemTotalPrice = parseFloat(
        item.querySelector(".item-total-price").textContent
      );
      subtotal += itemTotalPrice;
    });
    subtotalPriceElem.textContent = `$${subtotal.toFixed(2)}`;
    const total = subtotal + deliveryFee;
    totalPriceElem.textContent = `$${total.toFixed(2)}`;
  };

  const displayEmptyState = () => {
    const cartEmptyState = document.querySelector(".cart-empty-state");
    const checkoutForm = document.querySelector(".modal-content");
    // console.log(JSON.parse(localStorage.getItem("cartItems")));
    if (
      !JSON.parse(localStorage.getItem("cartItems")) ||
      Object.keys(JSON.parse(localStorage.getItem("cartItems"))).length == 0
    ) {
      cartEmptyState.style.display = "flex";
      Array.from(checkoutForm.children).forEach((child) => {
        if (child !== cartEmptyState) {
          child.style.display = "none";
        }
      });
    } else {
      // console.log(JSON.parse(localStorage.getItem("cartItems")));
      cartEmptyState.style.display = "none";
      Array.from(checkoutForm.children).forEach((child) => {
        if (child !== cartEmptyState) {
          child.style.display = "flex";
        }
      });
    }
  };

  applyDiscountBtn.onclick = () => {
    // Fetch the entered discount code
    const discountCodeElem = document.querySelector(".coupon-code");
    const discountCode = discountCodeElem.value.trim();

    // Define valid discount codes and their corresponding discount amounts
    const discountCodes = {
      SAVE10: 10, // $10 off
      SAVE20: 20, // $20 off
      PERCENT10: "10%", // 10% off
    };

    // Fetch the current total price from the DOM
    let orderTotalElement = document.getElementById("subtotal-price");
    let totalPriceElement = document.getElementById("total-price");

    // Convert price strings to numbers
    let orderTotal = parseFloat(orderTotalElement.textContent.replace("$", ""));
    let totalPrice = parseFloat(totalPriceElement.textContent.replace("$", ""));

    // Validate and apply the discount
    if (discountCodes.hasOwnProperty(discountCode)) {
      let discountValue = discountCodes[discountCode];

      if (typeof discountValue === "string" && discountValue.endsWith("%")) {
        // Percentage discount
        let percent = parseFloat(discountValue.replace("%", "")) / 100;
        let discountAmount = totalPrice * percent;
        orderTotal -= discountAmount;
        totalPrice -= discountAmount;
      } else {
        // Fixed amount discount
        orderTotal -= discountValue;
        totalPrice -= discountValue;
      }

      // Update the DOM with the new prices
      orderTotalElement.textContent = `$${orderTotal.toFixed(2)}`;
      totalPriceElement.textContent = `$${totalPrice.toFixed(2)}`;

      alert("Discount applied successfully!");
      discountCodeElem.disabled = true;
      applyDiscountBtn.onclick = null;
    } else {
      alert("Invalid discount code");
    }
  };

  displayEmptyState();
  loadCartState();
};


// Function to render cards
const cardContainer = document.getElementById("card-container");
const resultsInfo = document.getElementById("results-info");
const pageInfo = document.getElementById("page-info");
// const cardsPerPageNum = 8; // Number of cards per page
// let currentPageNum = 1;

export const renderCards = ({
  dataToRender,
  currentPageNum,
  cardsPerPageNum,
}) => {
  const start = (currentPageNum - 1) * cardsPerPageNum;
  const end = Math.min(start + cardsPerPageNum, dataToRender.length);
  cardContainer.innerHTML = "";

  for (let i = start; i < end; i++) {
    const car = dataToRender[i];
    const card = `
      <a href="./product-details.html" id='${car.id}' class="item-container relative items-center flex gap-2 flex-col border border-solid border-[#1E1E1E4D] hover:[box-shadow:0px_4px_30px_0px_#00000033] rounded-xl py-3 px-6">
        <div class="flex justify-center h-</a>full w-full max-w-[259px] max-h-[193px] py-7 px-1 overflow-hidden">
          <img class="h-auto w-auto max-w-full max-h-full" src="${car.image}" alt="car">
        </div>
        <p class="item-name antialiased font-bold font-['poppins'] text-sm md:text-lg text-center sm:text-left capitalize text-[#767676]">
          ${car.name}
        </p>
        <div class="flex gap-2 items-center flex-col sm:flex-row">
          <div class="flex items-center justify-center">
            <img class="w-[12px] h-[12px]" src="./assets/images/colored-star.svg" alt="rating-star">
            <img class="w-[12px] h-[12px]" src="./assets/images/colored-star.svg" alt="rating-star">
            <img class="w-[12px] h-[12px]" src="./assets/images/colored-star.svg" alt="rating-star">
            <img class="w-[12px] h-[12px]" src="./assets/images/non-colored-star.svg" alt="rating-star">
            <img class="w-[12px] h-[12px]" src="./assets/images/non-colored-star.svg" alt="rating-star">
          </div>
          <p class="font-['poppins'] text-[#1E1E1E] text-center text-xs antialiased capitalize">
            <span>${car.rating}</span>
            <span>(${car.reviewsNum} reviews)</span>
          </p>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 w-full place-content-between gap-1">
          <div class="bg-[#000000] rounded-md px-2 py-2 flex justify-center gap-1 items-center">
            <div class="flex justify-center w-full h-full max-w-4 max-h-4">
              <img class="w-auto h-auto max-w-full max-h-full" src="./assets/images/seat-icon.svg" alt="seat-icon">
            </div>
            <p class="text-[#FFFFFF] antialiased text-xs text-left font-normal font-['poppins'] capitalize whitespace-nowrap overflow-hidden">
              ${car.seatCount} Seats
            </p>
          </div>
          <div class="bg-[#000000] rounded-md px-2 py-2 flex justify-center gap-1 items-center">
            <div class="flex justify-center w-full h-full max-w-4 max-h-4">
              <img class="w-auto h-auto max-w-full max-h-full" src="./assets/images/auto-icon.svg" alt="seat-icon">
            </div>
            <p class="text-[#FFFFFF] antialiased text-xs text-left font-normal font-['poppins'] capitalize whitespace-nowrap overflow-hidden">
              ${car.transmissionType}
            </p>
          </div>
          <div class="bg-[#000000] rounded-md px-2 py-2 flex justify-center gap-1 items-center">
            <div class="flex justify-center w-full h-full max-w-4 max-h-4">
              <img class="w-auto h-auto max-w-full max-h-full" src="./assets/images/fuel-icon.svg" alt="fuel-icon">
            </div>
            <p class="text-[#FFFFFF] antialiased text-xs text-left font-normal font-['poppins'] capitalize whitespace-nowrap overflow-hidden">
              ${car.fuel}
            </p>
          </div>
        </div>
        <div class="flex justify-between items-center w-full gap-2">
          <p class="item-price font-bold font-['poppins'] text-left antialiased text-[#1E1E1E] text-sm sm:text-base md:text-lg lg:text-xl">
            <span>${car.currencySymb}</span><span>${car.price}</span>
          </p>
          <div class="flex justify-center items-center gap-2">
            <button class="add-to-cart flex justify-center w-full h-full max-w-6 max-h-6">
              <img src="./assets/images/like.svg" alt="wishlist-icon">
            </button>
            <button class="pseudo-add-to-cart flex justify-center w-full h-full max-w-6 max-h-6">
              <img src="./assets/images/add-icon.svg" alt="add-icon">
            </button>
            <button class="flex justify-center w-full h-full max-w-6 max-h-6">
              <img src="./assets/images/preview-icon.svg" alt="preview-icon">
            </button>
          </div>
        </div>
        <div class="add-to-cart-container hidden rounded-xl absolute w-full h-full top-0 left-0 bg-[rgba(0,0,0,0.5)]">
          <div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center flex-col justify-center sm:justify-normal gap-4">
            <div class="quantity-selector flex items-center p-2 rounded bg-[#E9E9E9] text-[#000000]">
              <button id="minus" class="decrease bg-gray-200 text-gray-700 font-bold px-4 whitespace-nowrap uppercase font-['Montserrat'] text-sm sm:text-xl">
                -
              </button>
              <input type="text" id="quantity" min="1" step="1" value="1" class="w-12 outline-none text-center bg-transparent whitespace-nowrap uppercase font-semibold font-['Montserrat'] text-xs sm:text-sm">
              <button id="plus" class="increase bg-gray-200 text-gray-700 font-bold px-4 whitespace-nowrap uppercase font-['Montserrat'] text-sm sm:text-xl">
                +
              </button>
            </div>
            <button class="add-to-cart bg-orange-500 text-white whitespace-nowrap uppercase font-semibold font-['Montserrat'] text-xs sm:text-sm p-2 pt-[10px] pb-[10px] rounded">
              ADD TO CART
            </button>
          </div>
        </div>
      </a>
    `;

    cardContainer.innerHTML += card;
  }

  resultsInfo &&
    (resultsInfo.textContent = `Showing ${start + 1} - ${end} of ${
      dataToRender.length
    } results`);
  pageInfo &&
    (pageInfo.textContent = `Page ${currentPageNum} of ${Math.ceil(
      dataToRender.length / cardsPerPageNum
    )}`);
};

const updateQuantity = (action, event, quantityInput) => {
  event.preventDefault(); // Prevent default button behavior if any
  const currentQuantity = parseInt(quantityInput.value);

  if (action === "increase") {
    quantityInput.value = currentQuantity + 1;
  } else if (action === "decrease") {
    if (currentQuantity > 1) {
      quantityInput.value = currentQuantity - 1;
    }
  }
};

const handleDecrease = (event) => {
  const quantityInput = event.target.closest('.quantity-selector').querySelector('#quantity');
  updateQuantity("decrease", event, quantityInput);
};

const handleIncrease = (event) => {
  const quantityInput = event.target.closest('.quantity-selector').querySelector('#quantity');
  updateQuantity("increase", event, quantityInput);
};

export const updateQuantityHandler = (targetDecreaseBtn, targetIncreaseBtn) => {
  const decreaseButton = targetDecreaseBtn || document.querySelector(".decrease");
  const increaseButton = targetIncreaseBtn || document.querySelector(".increase");

  decreaseButton.removeEventListener("click", handleDecrease);
  increaseButton.removeEventListener("click", handleIncrease);
  decreaseButton.addEventListener("click", handleDecrease);
  increaseButton.addEventListener("click", handleIncrease);
};


export const getClickedProductId = () => {
  return sessionStorage.getItem("clickedProductId");
};

export const targetItem = (targetProuctId) => {
  const targetId = targetProuctId ? targetProuctId : getClickedProductId();
  if (targetId) {
    const findProductById = (id) => {
      return defaultInventoryData.find((product) => product.id === id);
    };

    const targetProduct = findProductById(targetId);
    return targetProduct;
  }
};

export const cartItemContainer = (cartItem, cartItemsQty, collectionType) => {
  // console.log(cartItemsQty);
  return `
                      <img class="remove  w-4 cursor-pointer" id="remove" src="./assets/images/remove.png" alt="">
                      <div class="item-image w-full h-full max-w-8 max-h-8 flex-[0_0_2rem] gap-2 flex justify-center">
                          <img class="product-image w-full h-full" id="product-image" src="${
                            cartItem.image
                          }" alt="">
                      </div>
                      <div class="product-name text-left min-w-28 w-28 flex flex-col gap-2">
                          <h2 class="name antialiased text-xs font-medium font-['Kumbh_Sans'] w-full whitespace-nowrap overflow-hidden text-ellipsis sm:text-base text-black">${
                            cartItem.name
                          }</h2>
                            ${
                              cartItem.collectionType
                                ? `<p class="vendor antialiased text-[8px] font-light w-20 whitespace-nowrap overflow-hidden text-ellipsis">${cartItem.collectionType}</p>`
                                : ""
                            }
                      </div>
                      <div class="quantity-selector flex flex-[0_0_120px] py-0 px-1 text-center justify-between rounded-2xl">
                          <button class="decrement bg-[#888] border-none cursor-pointer aspect-square rounded-full h-3 flex items-center justify-center">
                              <img class="w-[7px]" src="./assets/images/minus.png" alt="decrement-icon">
                          </button>
                          <input class="appearance-none antialiased border-none outline-none text-center w-full max-w-20 text-xs" type="number" id="quantity" value="${cartItemsQty}" min="1">
                          <button class="increment bg-[#888] border-none cursor-pointer aspect-square rounded-full h-3 flex items-center justify-center">
                              <img class="w-[7px]" src="./assets/images/plus.png" alt="increment-icon">
                          </button>
                      </div>
                      <div class="each-item-price w-28 flex justify-start text-xs font-medium">
                        <p class="unit-price antialiased hidden">${
                          cartItem.price
                        }</p>
                        <p>$<span class="item-total-price antialiased"></span></p>
                      </div>
                  `;
};


export const addToCartElemHandler = () => {
  const addToCartContainerElems = document.querySelectorAll(".item-container");
  const addToCartOnHoverHandler = (elem, event) => {
    event.preventDefault();

    if (elem.contains(event.target)) {
      const targetParentContainerElemId = elem.id;
      const targetaddToCartContainerElem = document.querySelector(
        `#${CSS.escape(targetParentContainerElemId)} .add-to-cart-container`
      );
      const targetaddToCartContainerDecreaseBtnElem = document.querySelector(
        `#${CSS.escape(targetParentContainerElemId)} .decrease`
      );
      const targetaddToCartContainerIncreaseBtnElem = document.querySelector(
        `#${CSS.escape(targetParentContainerElemId)} .increase`
      );
      const targetpseudoAddToCartElem = document.querySelector(
        `#${CSS.escape(targetParentContainerElemId)} .pseudo-add-to-cart`
      );

      targetpseudoAddToCartElem.addEventListener("mouseenter", (event) => {
        event.preventDefault();

        const stopElemClickNavigation = (event) => {
          event.preventDefault();
          event.stopPropagation();
        };

        elem.addEventListener("click", stopElemClickNavigation);

        targetaddToCartContainerElem.classList.remove("hidden");
        targetaddToCartContainerElem.classList.add("flex");

        updateQuantityHandler(
          targetaddToCartContainerDecreaseBtnElem,
          targetaddToCartContainerIncreaseBtnElem
        );
        targetaddToCartContainerElem.addEventListener("mouseleave", () => {
          console.log("Out");
          targetaddToCartContainerElem.classList.remove("flex");
          targetaddToCartContainerElem.classList.add("hidden");
          elem.removeEventListener("click", stopElemClickNavigation);
        });
      });
    }
  };

  if (addToCartContainerElems) {
    addToCartContainerElems.forEach((elem) => {
      elem.addEventListener("mouseenter", (event) =>
        addToCartOnHoverHandler(elem, event)
      );
    });
  }
};